<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>


    <meta charset="UTF-8">
    <title>FrontPage</title>
    <script src="https://www.gstatic.com/firebasejs/5.9.2/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyC_4-Dhm35VlOSAcoRktC8dMIC8y8oSuYA",
            authDomain: "comicsqueeze.firebaseapp.com",
            databaseURL: "https://comicsqueeze.firebaseio.com",
            projectId: "comicsqueeze",
            storageBucket: "comicsqueeze.appspot.com",
            messagingSenderId: "213405157042"
        };
        firebase.initializeApp(config);
    </script>
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src =js/signIn.js></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.2/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyC_4-Dhm35VlOSAcoRktC8dMIC8y8oSuYA",
            authDomain: "comicsqueeze.firebaseapp.com",
            databaseURL: "https://comicsqueeze.firebaseio.com",
            projectId: "comicsqueeze",
            storageBucket: "comicsqueeze.appspot.com",
            messagingSenderId: "213405157042"
        };
        firebase.initializeApp(config);
    </script>
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src =js/signIn.js></script>
    <script src="js/navBar.js"></script>
    <script src="js/lightbox.js"></script>
    <script src="js/frontPage.js"></script>
    <script src="slick/slick.js"></script>
    <link href="css/page_layout.css" rel="stylesheet">
    <link href="css/buttons.css" rel="stylesheet">
    <link href="css/frontPage_main_styles.css" rel="stylesheet">
    <link href="css/modal_styles.css" rel="stylesheet">
    <link href="css/series_main_styles.css" rel="stylesheet">
    <link href="slick/slick.css" rel="stylesheet">
    <link href="slick/slick-theme.css" rel="stylesheet">
    <link href="css/slick-override.css" rel="stylesheet">
    <link href="css/lightbox.css" rel="stylesheet">

</head>

<body style="margin: 0px">

<div class="flexContainer flexColumn fullHeight whiteBackground">
    <nav class="navBar darkGreyBackground">
        <a style="float: left; padding-left: 17%; display: inline-block">
            <img th:if="${session.username}!=null" th:src="${curMember.getImgUrl()}" class="navUserIcon" style="border-radius: 50%;">
            <a th:if="${session.username}!=null" th:href="@{/yourprofile}" th:text="${session.username}" class="navButton" style="float: left; margin-left: 15px; display: inline-block"></a>
            <a th:if="${session.username}!=null" onclick="notificationsClicked()" class="navButton" style="float: left; display: inline-block">
                <img src="images/icons/notification_icon.png" class="navIcon">
            </a>
        </a>
        <a th:href="@{/}" class="navLogo"></a>
        <div style="float: right; padding-right: 17%;">
            <a th:href="@{/search}" style="float: right; display: inline-block">
                <img src="images/icons/search_icon.png" class="navIcon">
            </a>
            <a th:if="${session.username}==null" th:href="@{/register}" class="navButton" style="float: right; margin-right: 10px">REGISTER</a>
            <a th:if="${session.username}==null" onclick="loginClicked()" class="navButton" style="float: right;">SIGN IN</a>
            <a th:if="${session.username}!=null" class="button-as-link" style="width: fit-content; margin: 0 10px 0 0; float: right;">
                <button class="navButton" id="signOut" style="border-bottom: 0; border-top: 0" onclick="signOut()">LOG OUT</button>
            </a>
        </div>
    </nav>

    <div class="flexContainer flexItem">

        <main class="flexItem whiteBackground main">
            <h1>Weekly Collaborative Comic</h1>
            <div class="flexContainer flexRow">
                <div class="column-left img">
                    <img src="images/EXAMPLE.jpg" style="size: auto">
                </div>
                <div class="column-right">
                    <div class="flexContainer flexColumn">
                        <h3>Guidelines:</h3>
                        <p>Genre: Action, Superhero</p>
                        <p>Story so far:</p>
                        <p>Bruce Wayne is having dinner with his girlfriend Jezebel Jet. She is beginning to get upset with all his disappearances.
                            She wants to know what he's hiding from her. Their dinner and discussion is interrupted when the Fiend with Nine Eyes arrives...</p>
                        <p th:if="${session.username}==null">Log in to:</p>
                        <h4 style="margin-top: 0">Vote on, or submit, a page to continue the story.</h4>
                        <div class="flexContainer flexRow" style="justify-content: space-evenly; padding-top: 20px;">
                            <!--<a class="button-as-link" href="#past-comics-modal-container" data-reveal-id="exampleModal">-->
                                <button class="lime-button" onclick="pastWeeklyClicked()">PAST COMICS</button>
                            <!--</a>-->
                            <!--<a th:if="${session.username}!=null" id="votePageBtn" class="button-as-link" href="#vote-modal-container" data-reveal-id="exampleModal">-->
                                <button th:if="${session.username}!=null" class="lime-button" onclick="voteClicked()">VOTE ON PAGE</button>
                            <!--</a>-->
                            <a th:if="${session.username}!=null and ${session.curMember.isCreatedWeekly()}==false"  class="button-as-link" th:href="@{/createpage}">
                                <button class="lime-button">CREATE PAGE</button>
                            </a>
                            <!-- eventually, only show when admin -->
                            <button onclick="newWeeklyClicked()" class="lime-button">CREATE NEW WEEKLY ISSUE</button>
                        </div>
                    </div>
                </div>
            </div>

            <br>

            <h1>Top Artists</h1>
            <div class="flexContainer flexRow" style="justify-content: space-evenly">
                <div class="flexContainer flexColumn" style="align-items: center">
                    <a th:href="@{/viewprofile/{profileID}(profileID=varunbat123)}"><img class="top-artist" src="https://firebasestorage.googleapis.com/v0/b/comicsqueeze.appspot.com/o/v%40gmail.com%2FprofPic?alt=media&token=c3af49ad-02f1-4254-9db3-7a2c1608bbbf"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">varunbat123</p>
                    <p style="margin: 0px"># Followers</p>
                </div>
                <div class="flexContainer flexColumn" style="align-items: center">
                    <a th:href="@{/viewprofile/{profileID}(profileID=usmanman)}"><img class="top-artist" src="https://firebasestorage.googleapis.com/v0/b/comicsqueeze.appspot.com/o/byebyedude1%40gmail.com%2FprofPic?alt=media&token=76f298db-b24b-4614-a920-1c1e9f9b3b0c"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">usmanman</p>
                    <p style="margin: 0px"># Followers</p>
                </div>
                <div class="flexContainer flexColumn" style="align-items: center">
                    <a th:href="@{/viewprofile/{profileID}(profileID=SBXia)}"><img class="top-artist" src="https://firebasestorage.googleapis.com/v0/b/comicsqueeze.appspot.com/o/obneiric%40gmail.com%2FprofPic?alt=media&token=b59c3170-88a9-475e-9627-a054983d7f73"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">SBXia</p>
                    <p style="margin: 0px"># Followers</p>
                </div>
                <div class="flexContainer flexColumn" style="align-items: center">
                    <a th:href="@{/viewprofile/{profileID}(profileID=myDude)}"><img class="top-artist" src="https://firebasestorage.googleapis.com/v0/b/comicsqueeze.appspot.com/o/tristan.martin%40stonybrook.edu%2FprofPic?alt=media&token=11bf3c49-6dd5-431f-8786-2bf2365e72a7"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">myDude</p>
                    <p style="margin: 0px"># Followers</p>
                </div>
                <div class="flexContainer flexColumn" style="align-items: center">
                    <a th:href="@{/viewprofile/{profileID}(profileID=postgre)}"><img class="top-artist" src="https://firebasestorage.googleapis.com/v0/b/comicsqueeze.appspot.com/o/356sxiatictac%40gmail.com%2FprofPic?alt=media&token=e41b3e11-4bff-4ad7-b3ea-62e248ebae7c"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">postgre</p>
                    <p style="margin: 0px"># Followers</p>
                </div>
            </div>

            <br>

            <h1>Featured Issues</h1>
            <div class="flexContainer flexRow" style="flex-wrap: wrap; justify-content: space-around; align-content: flex-start">
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
                <div class="flexContainer flexColumn issue" style="align-items: center;">
                    <a th:href="@{/issue}"><img src="images/EXAMPLE_2.jpg"></a>
                    <p style="font-weight: bold; margin-bottom: 0px;">Issue #</p>
                    <p style="margin-top: 0px; margin-bottom: 30px;">Username</p>
                </div>
            </div>

            <br><br><br>

        </main>

        <aside class="sidebar sidebarLeft"></aside>
        <aside class="sidebar sidebarRight"></aside>

    </div>

    <!--Notifications Popup-->
    <div id="notifications" class="modal-notifications">
        <div id="notifications-modal" class="modal-notifications-inner">
            <div class="flexContainer flexRow">
                <button onclick="closeNotifications()" class="modalCloseBtn">X</button>
                <div class="flexContainer flexColumn" style="overflow: scroll; overflow-x: hidden; height: 200px;">
                    <p class="notification-item">USERNAME has released a new comic series</p>
                    <p class="notification-item">USERNAME has written a review for your series: SERIES NAME</p>
                    <p class="notification-item">New Follower: USERNAME</p>
                    <p class="notification-item">SeriesName has been flagged.</p>
                    <p class="notification-item">USERNAME has released a new comic series</p>
                </div>
            </div>
        </div>
    </div>

    <!--Past Comics Popup-->
    <div id="past-comics" class="modal">
        <div id="past-comics-modal" class="modal-inner">
            <div class="flexContainer flexColumn">
                <h2 style="margin: 0">Past Comics</h2><br><br>
                <div class="flexContainer flexRow" style="flex-wrap: wrap; justify-content: space-around; align-content: flex-start">
                        <th:block th:each="issue:${weeklyIssues}">
                            <div class="flexContainer flexColumn issue" style="align-items: center;">
                                <a  th:href="@{images/EXAMPLE_3.jpg}" data-lightbox="test" class="issue-page"><img src="images/EXAMPLE_3.jpg"></a>
                                <th:block th:each="page: ${issue.getPages()}">

                                    <a th:href="${page.getImgurl()}" data-lightbox="test" class="issue-page"></a>

                                </th:block>
                                <p style="font-weight: bold; margin-bottom: 0px;" th:text="${issue.getTitle()}">Issue Title</p>
                                <p style="margin-top: 0px; margin-bottom: 30px;"th:text="${issue.getSeries()}">Series Name</p>
                            </div>
                        </th:block>
                </div>
                <div class="flexContainer flexRow" style="justify-content: space-between; margin-top: 10px">
                    <!--<a href="#" class="button-as-link close-reveal-modal" style="width: fit-content; margin: 0">-->
                        <button class="grey-button-left" onclick="closePastWeekly()">CLOSE</button>
                    <!--</a>-->
                </div>
            </div>
        </div>
    </div>

    <!--Vote on Page Popup-->
    <div id="vote" class="modal">
        <div id="vote-modal" class="modal-inner">
            <div class="flexContainer flexColumn">
                <h2 style="margin: 0">Vote</h2><br>
                <div class="horizontal_slick left-align-slick">
                    <th:block th:each="page: ${weeklyContributions}">
                        <div>
                            <div class="flexContainer flexColumn" style="align-items: center">
                                <a th:href="${page.getImgurl()}" data-lightbox="votePages">
                                    <img th:src="${page.getImgurl()}" class="issue" style="margin: auto; border: 1px solid #d0d0d0;">
                                </a>
                                <p th:text="${page.getUsername()}" style="margin-top: 3px; margin-bottom: 3px; text-align: center"></p>
                                <div th:if="${session.curMember}!=null">
                                    <div th:if="${session.curMember.getVoted()} ==false">
                                        <div th:if="${page.getUsername()}!= ${session.curMember.getUsername()}">
                                        <a th:href="@{'castVote?username='+${page.getUsername()}+'&issue='+${page.getIssue()}+'&pagenum='+${page.getPagenumber()}}" class="lime-button-left" style="margin: auto; padding: 5px; font-size: 18px; margin-bottom: 20px">CAST VOTE</a>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </th:block>
                </div>
                <!--<a href="#" class="button-as-link close-reveal-modal" style="width: fit-content; margin: 0">-->
                    <button class="grey-button-left" onclick="closeVote()">CANCEL</button>
                <!--</a>-->
            </div>
        </div>
    </div>


    <!--Sign In Popup-->
    <div id="sign-In" class="modal-login">
        <div id="signIn-modal" class="modal-login-inner">
            <div class="flexContainer flexColumn">

                Email: <input id = "email"class="input-small" type="text" name="email"><br><br>
                <label id ="passLbl">Password:</label> <input type="password" id="passWord" class="input-small" name="passWord">
                <div class="flexContainer flexRow">
                    <input type="checkbox" onclick="showPass()" style="padding-right: 5px; width: fit-content;">
                    Show Password
                </div>

                <div class="flexContainer flexRow" style="justify-content: space-between; margin-top: 10px">
                    <!--<a class="button-as-link" style="width: fit-content; margin: 0">-->
                        <button id = "signIn" onclick="signIn()"  class="lime-button-left">SIGN IN</button>
                    <!--</a>-->
                    <a id ="forgot" href="javascript:forgotPassword();">Forgot Password?</a>
                    <!--<a href="#" class="button-as-link close-reveal-modal" style="width: fit-content; margin: 0">-->
                        <button  class="grey-button-left" onclick="closeLogin()">CLOSE</button>
                    <!--</a>-->
                </div>
            </div>
        </div>
    </div>

    <!--new weekly issue modal-->
    <div id="new-weekly" class="modal">
        <div id="new-weekly-modal" class="modal-inner">
            <div class="flexContainer flexColumn">
                <form action="/createWeeklyIssue">
                   Issue name: <input class="input-small" type="text" name="issueTitle"><br>
                   Description: <input class="input-small" type="text" name="description">
                    <input type="submit" class="lime-button-left">
                </form>
                <!--<a href="#" class="button-as-link close-reveal-modal" style="width: fit-content; margin: 0">-->
                    <button  class="grey-button-left" onclick="closeNewWeekly()">CLOSE</button>
                <!--</a>-->
            </div>
        </div>
    </div>

    <footer class="footer darkGreyBackground">Copyright &copy; Debugging Enterprises</footer>

</div>

</body>

</html>